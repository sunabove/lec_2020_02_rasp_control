<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AlphaBot</title>
	<link href="/bootstrap.min.css" rel="stylesheet" media="screen">
	<script src="/jquery-3.6.0.min.js"></script>
	<script src="/popper.min.js"></script>
	<script src="/bootstrap.min.js"></script> 
    <script> 
		
        $(function(){
			// tooltip init
			var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
			var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
				return new bootstrap.Tooltip(tooltipTriggerEl)
			});
			// -- tooltip init

            $(".motor").bind( "mousedown", function(){
                $.post("/cmd",{ cmd: this.id, speed: $("#speed").val() }, function(data,status){
                });
            });

			$("motor").bind( "mouseup",function(){
                $.post("/cmd",{ cmd:"stop" }, function(data,status){
                });
            }); 

			$("button.servo").bind( "mousedown", function(){
                $.post("/cmd",{ cmd: this.id },function(data,status){
                });
            });

			$(".menu").click( function(){
                $.post("/cmd",{ cmd: this.id },function(data,status){
                });
            });

			$( "#speed" ).change( function() { $('#speed_desc').html( $("#speed").val() ) } )
        });
		
    </script>

	<style type="text/css">
    </style>
	
</head>

<body>

<div id="container" class="container text-center" >
	<br/>
	<h4>AlphaBot Control v 1.0.03</h4>

	<div class="container" class="text-center">
		<div class="row">
			<div class="col">
				<img src="{{ url_for('video_feed') }}" width="640" height="480" usemap="#workmap" />
				<map name="workmap">
					<area id="forward"    class="motor" shape="poly" coords="0,0, 213,160, 426,160,  640,0" 		title="Foreward"  _href="#foreward" >
					<area id="turn_left"  class="motor" shape="poly" coords="0,0, 213,160, 213,320,  0,640" 		title="Left"      _href="#left" >
					<area id="stop"       class="motor" shape="rect" coords="213,160,  426,320"             		title="Stop"      _href="#stop" >
					<area id="turn_right" class="motor" shape="poly" coords="640,0,  426,160,  426,320, 640,640" 	title="Right" 	  _href="#right" >
					<area id="backward"   class="motor" shape="poly" coords="0,640,  213,320,  426,320,  640,640" 	title="Backward"  _href="#backward" >
				</map>
			</div>
		</div>
	</div>

	<br/>

	<div class="container" class="width: 120px;">
		<div class="row">
			<div class="col">
				&nbsp;
			</div>

			<div class="col">
				&nbsp;
			</div>

			<div class="col">
				<table class="text-center" >
					<colgroup>
						<col width="56px" />
						<col width="56px" />
						<col width="56px" />
					</colgroup>
					<thead>
						<tr>
							<td colspan="100%" >
								<h6 class="text-center text-nowrap">Motor Control</h6>
							</td>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>&nbsp;</td>
							<td>
								<button id="forward" class="motor btn btn-lg btn-primary">&uuarr;</button>
							</td>
							<td>&nbsp;</td>
						</tr>
						<tr>
							<td>
								<button id='turn_left' class="motor btn btn-lg btn-primary">&llarr;</button>
							</td>
							<td>
								<button id='stop' class="motor btn btn-lg btn-danger">Stop</button>
							</td>
							<td>
								<button id='turn_right' class="motor btn btn-lg btn-primary">&rrarr;</button>
							</td>
						</tr>
						<tr>
							<td>&nbsp;</td>
							<td>
								<button id='backward' class="motor btn btn-lg btn-primary">&ddarr;</button>
							</td>
							<td>&nbsp;</td>
						</tr>
					</tbody>
					<tfoot>
						<tr>
							<td colspan="100%">
								<br/>
								<h6>Speed : <span id="speed_desc">50</span></h6>
								<input id="speed" type="range" class="form-label" min="20" max="100", value="50" style="margin:-10px; width:100%; "  >
							</td>
						</tr>
					</tfoot>
				</table>
			</div>

			<div class="col">
				<table class="text-center" >
					<colgroup>
						<col width="56px" />
						<col width="56px" />
						<col width="56px" />
					</colgroup>
					<thead>
						<tr>
							<td colspan="100%" >
								<h6 class="text-center text-nowrap">Servo Control</h6>
							</td>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>&nbsp;</td>
							<td>
								<button id="servo_up" class="servo btn btn-lg btn-success">&uuarr;</button>
							</td>
							<td>&nbsp;</td>
						</tr>
						<tr>
							<td>
								<button id='servo_left' class="servo btn btn-lg btn-success">&llarr;</button>
							</td>
							<td>
								<button id='servo_stop' class="servo btn btn-lg btn-danger">Stop</button>
							</td>
							<td>
								<button id='servo_right' class="servo btn btn-lg btn-success">&rrarr;</button>
							</td>
						</tr>
						<tr>
							<td>&nbsp;</td>
							<td>
								<button id='servo_down' class="servo btn btn-lg btn-success">&ddarr;</button>
							</td>
							<td>&nbsp;</td> 
						</tr>
					</tbody>
				</table>
			</div>

			<div class="col text-left">
				<div class="btn-group">
					<button type="button" class="btn-sm btn-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
						메뉴
					</button>
					<ul class="dropdown-menu">
						<li><a id="obstacle_sensor" class="menu dropdown-item">장애물 회피</a></li> 
						<li><a id="line_tracking" class="menu dropdown-item">라인 트래킹 (센서)</a></li> 
						<li><a id="line_tracking_cam" class="menu disabled dropdown-item">라인 트래킹 (카메라)</a></li>
						<li><hr class="dropdown-divider"></li>
						<li><a id="stop_service" class="menu dropdown-item menu">Stop</a></li>
						<li><hr class="dropdown-divider"></li>
						<li><a id="shutdown" class="menu dropdown-item">Shut down</a></li>
					</ul>
				</div>
			</div>

			<div class="col">
				&nbsp;
			</div>

		</div>

		<br/><br/>
	</div>

</div>

</body>
</html>
